# Check if there are staged changes in src/content/posts/
POSTS_CHANGED=$(git diff --cached --name-only --diff-filter=ACM | grep "^src/content/posts/.*\.md$")

if [ -n "$POSTS_CHANGED" ]; then
  echo "ğŸ“ Posts en espaÃ±ol detectados, ejecutando traducciÃ³n..."
  npm run translate

  # Add translated posts to staging
  git add src/content/posts-en/
  echo "âœ… Traducciones aÃ±adidas al commit"
fi

# Run formatter (auto-fix) on staged files only
npx prettier --write $(git diff --cached --name-only --diff-filter=ACM)

# Add formatted files back to staging
git add -u

# Run linter
npm run lint
